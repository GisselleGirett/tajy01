<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">  
    <a-scene embedded arjs="sourceType: webcam;">
      
      <!-- Marcador Hiro -->
      <a-marker type='pattern' url='pattern-trigger_2.patt' id="marcador">
        
        <!-- Objeto 3D (reemplazando la caja roja por el modelo "rojo.glb") -->
        <a-gltf-model id="arbol1" src="arboles.glb" position="2 0.5 1" scale="1 2 1">
         <!-- <a-animation attribute="position" dur="2000" fill="forwards" to="2 1 1" repeat="indefinite"></a-animation>-->
        </a-gltf-model>

        <a-gltf-model id="arbol2" src="sol.glb" position="1 3 0" scale="1 1 1">
          <a-animation attribute="rotation" dur="3000" fill="forwards" to="0 360 0" repeat="indefinite"></a-animation>
        </a-gltf-model>

        <a-gltf-model id="arbol3" src="opy.glb" position="1 1 1" scale="1 1 1">
        </a-gltf-model>

        <a-gltf-model id="arbol3" src="bosque.glb" position="2 0.5 2" scale="0.5 1 0.5">
        </a-gltf-model>

      
         <!--<script>
        document.querySelector("a-scene").addEventListener("loaded", function () {
            var arbol1 = document.getElementById("arbol1");

            var animationProperties = {
              property: "position",
              to: "0 1 1",
              dur: 2000,
              easing: "linear",
            };
            arbol1.setAttribute("animation", animationProperties);
            var isForward = true;
            arbol1.addEventListener("animationcomplete", function () {
              if (isForward) {
                var animationProperties = {
                  property: "position",
                  to:"0 1 1",
                  dur: 2000,
                  easing: "linear",
                };
                arbol1.setAttribute("animation", animationProperties);
              } else {
                var animationProperties = {
                  property: "position",
                  to: "0 1 1",
                  dur: 2000,
                  easing: "linear",
                };
                arbol1.setAttribute("animation", animationProperties);
              }
              isForward = !isForward;
            });
          });
      </script>-->
        
      </a-marker>
      
      <!-- Sonidos -->
      <a-sound id="sonidoArbol1" src="sonidoleve.wav" position="0 1 1" loop="true" ></a-sound>
      <a-sound id="sonidoArbol2" src="sonidoleve.wav" position="1 3 0" loop="true" ></a-sound>
      <a-sound id="sonidoArbol3" src="sonidoleve.wav" position="1 1 1" loop="true" ></a-sound>

      <!-- Cámara AR -->
      <a-entity camera></a-entity>
      <script>
        AFRAME.registerComponent('sonido-control', {
          init: function () {
            var marcador = document.getElementById('marcador');
            var sonidoArbol1 = document.getElementById('sonidoArbol1');
            var sonidoArbol2 = document.getElementById('sonidoArbol2');
            var sonidoArbol3 = document.getElementById('sonidoArbol3');
      
            // Añade un evento al marcador cuando se detecta
            marcador.addEventListener('markerFound', function () {
              // Inicia la reproducción del sonido correspondiente al modelo detectado
              sonidoArbol1.components.sound.playSound();
              sonidoArbol2.components.sound.playSound();
              sonidoArbol3.components.sound.playSound();
            });
          }
        });
      </script>
            <!-- Aplica el componente de control de sonido al marcador -->
            <a-marker sonido-control></a-marker>
    </a-scene>
  </body>
</html>
